<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="pl" xml:lang="pl">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="https://moodle.mimuw.edu.pl/theme/standard/styles.php" />
<link rel="stylesheet" type="text/css" href="https://moodle.mimuw.edu.pl/theme/foodle/styles.php" />

<!--[if IE 7]>
    <link rel="stylesheet" type="text/css" href="https://moodle.mimuw.edu.pl/theme/standard/styles_ie7.css" />
<![endif]-->
<!--[if IE 6]>
    <link rel="stylesheet" type="text/css" href="https://moodle.mimuw.edu.pl/theme/standard/styles_ie6.css" />
<![endif]-->
<!--[if IE 7]>
    <link rel="stylesheet" type="text/css" href="https://moodle.mimuw.edu.pl/theme/standard/styles_ie7.css" />
<![endif]-->
<!--[if IE 6]>
    <link rel="stylesheet" type="text/css" href="https://moodle.mimuw.edu.pl/theme/foodle/styles_ie6.css" />
<![endif]-->

    <meta name="keywords" content="moodle, JNP1 C++: Zadanie &quot;libmaptel&quot; " />
    <title>JNP1 C++: Zadanie &quot;libmaptel&quot;</title>
    <link rel="shortcut icon" href="https://moodle.mimuw.edu.pl/theme/foodle/favicon.ico" />
    <!--<style type="text/css">/*<![CDATA[*/ body{behavior:url(https://moodle.mimuw.edu.pl/lib/csshover.htc);} /*]]>*/</style>-->

<script type="text/javascript" src="https://moodle.mimuw.edu.pl/lib/javascript-static.js"></script>
<script type="text/javascript" src="https://moodle.mimuw.edu.pl/lib/javascript-mod.php"></script>
<script type="text/javascript" src="https://moodle.mimuw.edu.pl/lib/overlib/overlib.js"></script>
<script type="text/javascript" src="https://moodle.mimuw.edu.pl/lib/overlib/overlib_cssstyle.js"></script>
<script type="text/javascript" src="https://moodle.mimuw.edu.pl/lib/cookies.js"></script>
<script type="text/javascript" src="https://moodle.mimuw.edu.pl/lib/ufo.js"></script>
<script type="text/javascript" src="https://moodle.mimuw.edu.pl/lib/dropdown.js"></script>  

<script type="text/javascript" defer="defer">
//<![CDATA[
setTimeout('fix_column_widths()', 20);
//]]>
</script>
<script type="text/javascript">
//<![CDATA[
function openpopup(url, name, options, fullscreen) {
    var fullurl = "https://moodle.mimuw.edu.pl" + url;
    var windowobj = window.open(fullurl, name, options);
    if (!windowobj) {
        return true;
    }
    if (fullscreen) {
        windowobj.moveTo(0, 0);
        windowobj.resizeTo(screen.availWidth, screen.availHeight);
    }
    windowobj.focus();
    return false;
}

function uncheckall() {
    var inputs = document.getElementsByTagName('input');
    for(var i = 0; i < inputs.length; i++) {
        inputs[i].checked = false;
    }
}

function checkall() {
    var inputs = document.getElementsByTagName('input');
    for(var i = 0; i < inputs.length; i++) {
        inputs[i].checked = true;
    }
}

function inserttext(text) {
  text = ' ' + text + ' ';
  if ( opener.document.forms['theform'].message.createTextRange && opener.document.forms['theform'].message.caretPos) {
    var caretPos = opener.document.forms['theform'].message.caretPos;
    caretPos.text = caretPos.text.charAt(caretPos.text.length - 1) == ' ' ? text + ' ' : text;
  } else {
    opener.document.forms['theform'].message.value  += text;
  }
  opener.document.forms['theform'].message.focus();
}

function getElementsByClassName(oElm, strTagName, oClassNames){
	var arrElements = (strTagName == "*" && oElm.all)? oElm.all : oElm.getElementsByTagName(strTagName);
	var arrReturnElements = new Array();
	var arrRegExpClassNames = new Array();
	if(typeof oClassNames == "object"){
		for(var i=0; i<oClassNames.length; i++){
			arrRegExpClassNames.push(new RegExp("(^|\\s)" + oClassNames[i].replace(/\-/g, "\\-") + "(\\s|$)"));
		}
	}
	else{
		arrRegExpClassNames.push(new RegExp("(^|\\s)" + oClassNames.replace(/\-/g, "\\-") + "(\\s|$)"));
	}
	var oElement;
	var bMatchesAll;
	for(var j=0; j<arrElements.length; j++){
		oElement = arrElements[j];
		bMatchesAll = true;
		for(var k=0; k<arrRegExpClassNames.length; k++){
			if(!arrRegExpClassNames[k].test(oElement.className)){
				bMatchesAll = false;
				break;
			}
		}
		if(bMatchesAll){
			arrReturnElements.push(oElement);
		}
	}
	return (arrReturnElements)
}
//]]>
</script>
</head>

<body  class="mod-resource course-53 dir-ltr lang-pl_utf8" id="mod-resource-view">

<div id="page">

    <div id="header" class=" clearfix">    	<div class="headermain"><div class="headernapis">JÄ™zyki i narzÄ™dzia programowania I, C++</div></div>
        <div class="headermenu"><div class="navigation">
<ul><li><form action="https://moodle.mimuw.edu.pl/mod/resource/view.php" onclick="this.target='_top';"><fieldset class="invisiblefieldset"><input type="hidden" name="id" value="1003" /><button type="submit" title="Poprzednia aktywnoÅ›Ä‡"><span class="arrow ">&#x25C4;</span><span class="accesshide " >&nbsp;Poprzednia aktywnoÅ›Ä‡</span></button></fieldset></form></li><li><form action="https://moodle.mimuw.edu.pl/course/jumpto.php" method="get"  id="navmenupopup" class="popupform"><div><select id="navmenupopup_jump" name="jump" onchange="self.location=document.getElementById('navmenupopup').jump.options[document.getElementById('navmenupopup').jump.selectedIndex].value;">
   <option value="https://moodle.mimuw.edu.pl/mod/forum/view.php?id=2379" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/forum/icon.gif);">Forum dyskusyjne 2009</option>
   <option value="https://moodle.mimuw.edu.pl/mod/forum/view.php?id=916" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/forum/icon.gif);">Forum dyskusyjne 2008</option>
   <optgroup label="
Podstawy (zajÄ™cia 1 i 2)uruchamianie kompilator...">   <option value="https://moodle.mimuw.edu.pl/mod/resource/view.php?id=1004" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/resource/icon.gif);">Czytanki</option>
   <option value="https://moodle.mimuw.edu.pl/mod/resource/view.php?id=2335" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/resource/icon.gif);">Zadanie "wyszukiwanie"</option>
   </optgroup>   <optgroup label="
Zaawansowane podstawy :-) (zajÄ™cia 3 i 4)rozÅ‚Ä...">   <option value="https://moodle.mimuw.edu.pl/mod/resource/view.php?id=1003" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/resource/icon.gif);">Czytanki</option>
   <option value="https://moodle.mimuw.edu.pl/mod/resource/view.php?id=2336" selected="selected" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/resource/icon.gif);">PrzejdÅº do...</option>
   </optgroup>   <optgroup label="
Semantyka wartoÅ›ci (zajÄ™cia 5 i 6)definiowanie...">   <option value="https://moodle.mimuw.edu.pl/mod/resource/view.php?id=1036" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/resource/icon.gif);"> Czytanki</option>
   <option value="https://moodle.mimuw.edu.pl/mod/resource/view.php?id=1037" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/resource/icon.gif);">rational.cc</option>
   <option value="https://moodle.mimuw.edu.pl/mod/resource/view.php?id=2470" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/resource/icon.gif);">Zadanie "CiÄ…gi kwaternionÃ³w"</option>
   </optgroup>   <optgroup label=" Przestrzenie nazw i biblioteka standardowa (zajÄ™...">   <option value="https://moodle.mimuw.edu.pl/mod/resource/view.php?id=1155" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/resource/icon.gif);">Czytanki</option>
   <option value="https://moodle.mimuw.edu.pl/mod/resource/view.php?id=2579" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/resource/icon.gif);">Zadanie "skojarzenia"</option>
   </optgroup>   <optgroup label="ZarzÄ…dzanie pamiÄ™ciÄ… (zajÄ™cia 8 i 9)
wskaÅºni...">   <option value="https://moodle.mimuw.edu.pl/mod/resource/view.php?id=1159" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/resource/icon.gif);">Czytanki</option>
   <option value="https://moodle.mimuw.edu.pl/mod/resource/view.php?id=2612" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/resource/icon.gif);">Zadanie "MyRope"</option>
   </optgroup>   <optgroup label="Polimorfizm dynamiczny (zajÄ™cia 10 i 11)podstawy...">   <option value="https://moodle.mimuw.edu.pl/mod/resource/view.php?id=1183" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/resource/icon.gif);">Czytanki</option>
   <option value="https://moodle.mimuw.edu.pl/mod/resource/view.php?id=2687" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/resource/icon.gif);">Zadanie "Tasklist"</option>
   <option value="https://moodle.mimuw.edu.pl/mod/resource/view.php?id=2688" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/resource/icon.gif);">PrzykÅ‚ad</option>
   <option value="https://moodle.mimuw.edu.pl/mod/resource/view.php?id=2689" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/resource/icon.gif);">PrzykÅ‚ad2</option>
   </optgroup>   <optgroup label="Szablony, wyjÄ…tki i RAII (zajÄ™cia 12 i 13)szablo...">   <option value="https://moodle.mimuw.edu.pl/mod/resource/view.php?id=1227" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/resource/icon.gif);">Czytanki</option>
   <option value="https://moodle.mimuw.edu.pl/mod/resource/view.php?id=2750" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/resource/icon.gif);">Zadanie PriorityQueue</option>
   </optgroup>   <optgroup label="Programowanie funkcyjne (zajÄ™cia 14)wskaÅºniki do...">   <option value="https://moodle.mimuw.edu.pl/mod/resource/view.php?id=1261" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/resource/icon.gif);">Czytanki</option>
   <option value="https://moodle.mimuw.edu.pl/mod/resource/view.php?id=2811" style="background-image: url(https://moodle.mimuw.edu.pl/theme/foodle/pix/mod/resource/icon.gif);">Zadanie Origami</option>
    </optgroup></select><input type="hidden" name="sesskey" value="UceqWWSyKz" /><div id="noscriptnavmenupopup" style="display: inline;"><input type="submit" value="Wykonaj" /></div><script type="text/javascript">
//<![CDATA[
document.getElementById("noscriptnavmenupopup").style.display = "none";
//]]>
</script></div></form></li><li><form action="https://moodle.mimuw.edu.pl/mod/resource/view.php"  onclick="this.target='_top';"><fieldset class="invisiblefieldset"><input type="hidden" name="id" value="1036" /><button type="submit" title="NastÄ™pna aktywnoÅ›Ä‡"><span class="accesshide " >NastÄ™pna aktywnoÅ›Ä‡&nbsp;</span><span class="arrow ">&#x25BA;</span></button></fieldset></form></li></ul>
</div></div>
    </div>    <div class="navbar clearfix">
        <div class="breadcrumb"><h2 class="accesshide " >JesteÅ› tutaj</h2> <ul>
<li class="first"><a onclick="this.target='_top'" href="https://moodle.mimuw.edu.pl/">MIMUW</a></li><li class="first"> <span class="accesshide " >/&nbsp;</span><span class="arrow sep">&#x25BA;</span> <a onclick="this.target='_top'" href="https://moodle.mimuw.edu.pl/course/view.php?id=53">JNP1 C++</a></li><li class="first"> <span class="accesshide " >/&nbsp;</span><span class="arrow sep">&#x25BA;</span> <a onclick="this.target='_top'" href="https://moodle.mimuw.edu.pl/mod/resource/index.php?id=53">Zasoby</a></li><li class="first"> <span class="accesshide " >/&nbsp;</span><span class="arrow sep">&#x25BA;</span> Zadanie "libmaptel"</li></ul></div>
        <div class="navbutton">&nbsp;</div>
    </div>
<div style="margin: 5px;">
    <!-- END OF HEADER -->
    <div id="content"><div class="box generalbox generalboxcontent boxaligncenter">Biblioteka standardowa jÄ™zyka C++ udostÄ™pnia bardzo przydatny typ std::map. Jest to typ generyczny, pozwalajÄ…cy tworzyÄ‡ sÅ‚owniki o rÃ³Å¼nych kluczach i wartoÅ›ciach, np. std::map&lt;std:string, std::string&gt;, std::map&lt;int, std::string&gt;, a nawet std::map&lt;std::string, map&lt;int, std::string&gt; &gt; i inne. Biblioteka standardowa jÄ™zyka C nie udostÄ™pnia podobnego typu.<br />
<br />
Napisz w C++ bibliotekÄ™ libmaptel udostÄ™pniajÄ…cÄ… w jÄ™zyku C sÅ‚owniki obsÅ‚ugujÄ…ce zmiany numerÃ³w telefonicznych. W jÄ™zyku C numer telefoniczny jest przechowywany w tablicy znakÃ³w typu char jako ciÄ…g cyfr ASCII i jest zakoÅ„czony terminalnym 0.<br />
<br />
Biblioteka powinna mieÄ‡ nastÄ™pujÄ…cy interfejs.<br />
<br />
unsigned long maptel_create()<br />
<br />
Tworzy sÅ‚ownik i zwraca liczbÄ™ naturalnÄ… bÄ™dÄ…cÄ… jego identyfikatorem.<br />
<br />
void maptel_delete(unsigned long id)<br />
<br />
Usuwa sÅ‚ownik o identyfikatorze id.<br />
Warunek wstÄ™pny: sÅ‚ownik istnieje.<br />
<br />
void maptel_insert(unsigned long id, const char *tel_src, const char *tel_dst)<br />
<br />
Wstawia do sÅ‚ownika o identyfikatorze id informacjÄ™ o zmianie numeru tel_src na numer tel_dst.<br />
Warunki wstÄ™pne: sÅ‚ownik istnieje, podane numery sÄ… poprawne.<br />
<br />
void maptel_erase(unsigned long id, const char *tel_src)<br />
<br />
JeÅ›li w sÅ‚owniku o identyfikatorze id jest informacja o zmianie numeru tel_src, to jÄ… usuwa.<br />
Warunki wstÄ™pne: sÅ‚ownik istnieje, podany numer jest poprawny.<br />
<br />
void maptel_transform(unsigned long id, const char *tel_src, char *tel_dst, size_t len)<br />
<br />
Sprawdza, czy w sÅ‚owniku o identyfikatorze id jest zapisana zmiana numeru tel_src. JeÅ›li jest, to zapisuje jÄ… w tel_dst. JeÅ›li nie ma, to zapisuje w tel_dst numer tel_src. WartoÅ›Ä‡ len to wielkoÅ›Ä‡ przydzielonej pamiÄ™ci wskazywanej przez tel_dst.<br />
Warunki wstÄ™pne: sÅ‚ownik istnieje, podany numer jest poprawny, przydzielony na numer docelowy bufor pamiÄ™ci ma dostateczny rozmiar.<br />
<br />
Biblioteka ma byÄ‡ kompilowana w trzech wersjach.<br />
<br />
Wersja produkcyjna (debuglevel = 0) powinna byÄ‡ pozbawiona informacji uruchomieniowej, powinna byÄ‡ zoptymalizowana pod wzglÄ™dem szybkoÅ›ci dziaÅ‚ania oraz powinna ignorowaÄ‡ sprawdzanie warunkÃ³w wstÄ™pnych.<br />
<br />
Wersja inÅ¼ynierska podstawowa (debuglevel = 1) powinna zawieraÄ‡ informacjÄ™ uruchomieniowÄ… pozwalajÄ…cÄ… otworzyÄ‡ kod biblioteki w debuggerze, powinna byÄ‡ skompilowana bez optymalizacji oraz powinna sprawdzaÄ‡ jak najwiÄ™cej warunkÃ³w spÃ³jnoÅ›ci programu (w szczegÃ³lnoÅ›ci wszystkie warunki wstÄ™pne), np. za pomocÄ… assert().<br />
<br />
Wersja inÅ¼ynierska rozszerzona (debuglevel = 2) powinna uzupeÅ‚niaÄ‡ wersjÄ™ inÅ¼ynierskÄ… podstawowÄ… o wypisywanie informacji uruchomieniowej na standardowy strumieÅ„ bÅ‚Ä™dÃ³w (stderr), np. w takiej postaci:<br />
<br />
libmaptel: maptel_create()<br />
libmaptel: maptel_create: new map id = 0<br />
libmaptel: maptel_insert(0, 112, 997)<br />
libmaptel: maptel_insert: inserted<br />
libmaptel: maptel_insert(0, 225544416, 225544401)<br />
libmaptel: maptel_insert: inserted<br />
libmaptel: maptel_transform(0, 112, 0xbfe81396, 22)<br />
libmaptel: maptel_transform: 112 -&gt; 997,<br />
libmaptel: maptel_transform(0, 223333333, 0xbfe81396, 22)<br />
libmaptel: maptel_transform: 223333333 -&gt; 223333333,<br />
libmaptel: maptel_erase(0, 223333333)<br />
libmaptel: maptel_erase: nothing to erase<br />
libmaptel: maptel_erase(0, 112)<br />
libmaptel: maptel_erase: erased<br />
libmaptel: maptel_transform(0, 112, 0xbfe81396, 22)<br />
libmaptel: maptel_transform: 112 -&gt; 112,<br />
libmaptel: maptel_delete(0)<br />
libmaptel: maptel_delete: map 0 deleted<br />
<br />
RozwiÄ…zanie powinno zawieraÄ‡:<br />
* plik maptel.h definiujÄ…cy interfejs biblioteki, dajÄ…cy siÄ™ wÅ‚Ä…czaÄ‡ do programÃ³w w C,<br />
* plik maptel.cc definiujÄ…cy implementacjÄ™ biblioteki,<br />
* skrypt makefile umoÅ¼liwiajÄ…cy skompilowanie biblioteki do pliku maptel.o; uruchomienie 'make' lub 'make debuglevel=0' powinno generowaÄ‡ wersjÄ™ produkcyjnÄ…, uruchomienie 'make debuglevel=1' powinno generowaÄ‡ wersjÄ™ inÅ¼ynierskÄ… podstawowÄ…, uruchomienie 'make debuglevel=2' powinno generowaÄ‡ wersjÄ™ inÅ¼ynierskÄ… rozszerzonÄ….<br />
<br />
PrzykÅ‚ad Å‚Ä…czenia biblioteki z programem w C:<br />
<br />
gcc -c telefony.c -o telefony.o<br />
g++ maptel.o telefony.o -o telefony<br />
<br />
RozwiÄ…zanie zadania naleÅ¼y zdeponowaÄ‡ w repozytorium w katalogu $USERID/libmaptel, gdzie $USERID to identyfikator konta studenckiego (inicjaÅ‚y plus numer indeksu). W pliku $USERID/libmaptel/zespol naleÅ¼y zapisaÄ‡ rozdzielone spacjÄ… identyfikatory (i tylko identyfikatory) osÃ³b tworzÄ…cych parÄ™ (lub trÃ³jkÄ™), ktÃ³ra opracowaÅ‚a rozwiÄ…zanie. Katalog $USERID/libmaptel ma zawieraÄ‡ tylko pliki wymienione w treÅ›ci zadania. ProszÄ™ pamiÄ™taÄ‡, Å¼e pliki w repozytorium majÄ… atrybuty (rwx), o ktÃ³re naleÅ¼y zadbaÄ‡.<br />
<br />
Bonus<br />
<br />
ZaimplementowaÄ‡ dodatkowe funkcje.<br />
<br />
int maptel_is_cyclic(unsigned long id, const char *tel_src)<br />
<br />
Zwraca wartoÅ›Ä‡ niezerowÄ… wtedy i tylko wtedy, gdy w sÅ‚owniku o identyfikatorze id [numer tel_src znajduje siÄ™ w cyklu kolejnych zmian numerÃ³w], startujÄ…c od numeru tel_src i idÄ…c poprzez kolejne zmiany numerÃ³w, natrafimy na cykl.<br />
Warunki wstÄ™pne: sÅ‚ownik istnieje, podany numer jest poprawny.<br />
<br />
void maptel_transform_ex(unsigned long id, const char *tel_src, char *tel_dst, size_t len)<br />
<br />
Podobnie jak maptel_transform, ale podÄ…Å¼a ciÄ…giem kolejnych zmian numerÃ³w.<br />
Dodatkowy warunek wstÄ™pny: [tel_src nie jest w cyklu] startujÄ…c od numeru tel_src i idÄ…c poprzez kolejne zmiany numerÃ³w, nie natrafimy na cykl.<br />
</div><div class="modified">Ostatnia modyfikacja: Tuesday,  20 October 2009, 02:02</div></div><div id="footer"><p class="helplink"></p><div class="logininfo">JesteÅ› zalogowany(a) jako <a  href="https://moodle.mimuw.edu.pl/user/view.php?id=1116&amp;course=53">Maciek Andrejczuk</a>  (<a  href="https://moodle.mimuw.edu.pl/login/logout.php?sesskey=UceqWWSyKz">Wyloguj</a>)</div><div class="homelink"><a  href="https://moodle.mimuw.edu.pl/course/view.php?id=53">JNP1 C++</a></div></div>
</div>

</div>

</body>
</html>
